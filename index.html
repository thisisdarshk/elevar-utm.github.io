<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unified Marketing Campaign URL & Tracking Builder</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Figtree:wght@400;500;600;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/lucide-static@latest/dist/lucide.min.js"></script>

    <script>
        // Tailwind CSS Configuration
        tailwind.config = {
            darkMode: 'class', // Enable dark mode using a class
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Figtree', 'Inter', 'sans-serif'],
                    },
                    colors: {
                        'elevar-blue': '#1e40af',
                        'elevar-blue-light': '#60a5fa',
                        'elevar-gray-bg': '#f3f4f6',
                        'elevar-dark-bg': '#111827',
                        'elevar-dark-card': '#1f2937',
                    }
                },
            },
        }
    </script>

    <style>
        /* Base body styles */
        body { font-family: 'Figtree', sans-serif; letter-spacing: -0.2px; transition: background-color 0.3s, color 0.3s; line-height: 1.6; }

        /* Tab styling */
        .tab-button { padding: 0.75rem 1.5rem; font-weight: 500; border-radius: 0.375rem 0.375rem 0 0; cursor: pointer; transition: background-color 0.2s, color 0.2s, border-color 0.2s; border: 1px solid transparent; border-bottom: none; margin-right: 0.25rem; outline: none; }
        .tab-button.active { background-color: #ffffff; color: #1e40af; border-color: #d1d5db; margin-bottom: -1px; position: relative; z-index: 1; }
        .dark .tab-button.active { background-color: #1f2937; color: #60a5fa; border-color: #4b5563; }
        .tab-button:not(.active) { background-color: #e5e7eb; color: #4b5563; }
        .dark .tab-button:not(.active) { background-color: #374151; color: #d1d5db; }
        .tab-button:not(.active):hover { background-color: #d1d5db; }
        .dark .tab-button:not(.active):hover { background-color: #4b5563; }
        .tab-content { display: none; border: 1px solid #d1d5db; padding: 1.5rem; background-color: #ffffff; border-radius: 0 0.5rem 0.5rem 0.5rem; }
        .tab-button.active + .tab-content, .tab-content.active { border-top-left-radius: 0; }
        .dark .tab-content { border-color: #4b5563; background-color: #1f2937; }
        .tab-content.active { display: block; }

        /* Tooltip styling */
        .tooltip { position: relative; display: inline-block; cursor: help; border-bottom: 1px dotted; }
        .tooltip .tooltiptext { visibility: hidden; width: 240px; background-color: #262626; color: #f5f5f5; text-align: left; border-radius: 6px; padding: 8px 12px; position: absolute; z-index: 50; bottom: 135%; left: 50%; transform: translateX(-50%); opacity: 0; transition: opacity 0.3s, visibility 0.3s; font-size: 0.75rem; line-height: 1.25; box-shadow: 0 2px 5px rgba(0,0,0,0.3); }
        .tooltip:hover .tooltiptext { visibility: visible; opacity: 1; }
        .dark .tooltip .tooltiptext { background-color: #d4d4d4; color: #171717; box-shadow: 0 2px 5px rgba(255,255,255,0.1); }
        .tooltip .utm-warning-tooltiptext { background-color: #f59e0b !important; color: white !important; width: 200px; }
        .dark .tooltip .utm-warning-tooltiptext { background-color: #d97706 !important; }

        /* Info icon and form validation helpers */
        .info-icon { display: inline-flex; align-items: center; justify-content: center; width: 16px; height: 16px; background-color: #6b7280; color: white; border-radius: 50%; font-size: 10px; font-weight: bold; line-height: 1; cursor: help; margin-left: 4px; user-select: none; }
        .dark .info-icon { background-color: #9ca3af; color: #1f2937; }
        label.required::after { content: " *"; color: #ef4444; }
        .input-error-message { display: none; color: #ef4444; font-size: 0.75rem; margin-top: 4px; }
        .utm-warning-icon { display: none; width: 1em; height: 1em; margin-left: 0.25rem; color: #f59e0b; vertical-align: middle; }
        .utm-warning-trigger.tooltip { border-bottom: none; }

        /* Toggle switch styling */
        .switch { position: relative; display: inline-block; width: 40px; height: 20px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 20px; }
        .slider:before { position: absolute; content: ""; height: 14px; width: 14px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: #2563eb; }
        input:checked + .slider:before { transform: translateX(20px); }
        .dark .slider { background-color: #4b5563; }
        .dark input:checked + .slider { background-color: #3b82f6; }

        /* Feedback message styling (for compliance, copy status, etc.) */
        .feedback-base { padding: 0.75rem; margin-top: 0.75rem; border-radius: 0.375rem; font-size: 0.875rem; line-height: 1.4; border-width: 1px; border-style: solid; min-height: 40px; }
        .feedback-info { background-color: #eff6ff; color: #1d4ed8; border-color: #93c5fd; }
        .dark .feedback-info { background-color: #1e3a8a; color: #bfdbfe; border-color: #3b82f6; }
        .feedback-warning { background-color: #fefce8; color: #a16207; border-color: #fde047; }
        .dark .feedback-warning { background-color: #713f12; color: #fef08a; border-color: #eab308; }
        .feedback-success, .copy-message.success { background-color: #f0fdf4; color: #15803d; border-color: #86efac; }
        .dark .feedback-success, .dark .copy-message.success { background-color: #14532d; color: #bbf7d0; border-color: #22c55e; }
        .feedback-error, .copy-message.error { background-color: #fef2f2; color: #b91c1c; border-color: #fca5a5; }
        .dark .feedback-error, .dark .copy-message.error { background-color: #7f1d1d; color: #fecaca; border-color: #ef4444; }

        /* GA4 Channel Info specific styling */
        .channel-info-highlight { background-color: #e0f2fe !important; border: 1px solid #7dd3fc !important; padding: 1rem !important; border-radius: 0.5rem !important; margin-top: 0.75rem !important; }
        .dark .channel-info-highlight { background-color: #0c4a6e !important; border-color: #38bdf8 !important; }
        .channel-info-highlight p { color: #075985; }
        .dark .channel-info-highlight p { color: #e0f2fe; }
        .channel-info-highlight #ga4-channel-description { font-weight: 500; }
        .channel-info-highlight #ga4-channel-conditions { margin-top: 0.5rem; font-size: 0.8rem; line-height: 1.5; background-color: rgba(255, 255, 255, 0.5); padding: 0.5rem; border-radius: 0.25rem; color: #0369a1; }
        .dark .channel-info-highlight #ga4-channel-conditions { background-color: rgba(0,0,0,0.2); color: #bae6fd; }

        /* Combobox (dropdown for inputs) styling */
        .combobox-container { position: relative; }
        .combobox-dropdown { position: absolute; top: 100%; left: 0; right: 0; border: 1px solid #d1d5db; border-top: none; background-color: white; z-index: 50; max-height: 200px; overflow-y: auto; border-radius: 0 0 0.375rem 0.375rem; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); }
        .dark .combobox-dropdown { background-color: #374151; border-color: #4b5563; }
        .combobox-dropdown-item { padding: 0.5rem 0.75rem; cursor: pointer; font-size: 0.875rem; line-height: normal; }
        .combobox-dropdown-item:hover { background-color: #f3f4f6; }
        .dark .combobox-dropdown-item:hover { background-color: #4b5563; }

        /* Form section and parameter group styling */
        .form-section, .param-group { background-color: white; padding: 1.5rem; border-radius: 0.5rem; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06); margin-bottom: 1.5rem; }
        .dark .form-section, .dark .param-group { background-color: #1f2937; }

        /* General input, select, textarea styling */
        input[type="text"], input[type="url"], input[type="search"], select, textarea { font-family: 'Figtree', 'Inter', sans-serif; padding: 0.5rem 0.75rem; border: 1px solid #d1d5db; border-radius: 0.375rem; background-color: white; color: #111827; width: 100%; transition: border-color 0.2s, box-shadow 0.2s; line-height: normal; }
        input[type="text"]:focus, input[type="url"]:focus, input[type="search"]:focus, select:focus, textarea:focus { outline: 2px solid transparent; outline-offset: 2px; --tw-ring-color: #60a5fa; border-color: #60a5fa; box-shadow: 0 0 0 2px var(--tw-ring-color); }
        .dark input[type="text"], .dark input[type="url"], .dark input[type="search"], .dark select, .dark textarea { background-color: #374151; border-color: #4b5563; color: #d1d5db; }
        .dark input[type="text"]::placeholder, .dark input[type="url"]::placeholder, .dark input[type="search"]::placeholder, .dark textarea::placeholder { color: #9ca3af; }
        .dark input[type="text"]:focus, .dark input[type="url"]:focus, .dark input[type="search"]:focus, .dark select:focus, .dark textarea:focus { --tw-ring-color: #3b82f6; border-color: #3b82f6; }

        textarea { min-height: 96px; resize: vertical; }

        /* Custom checkbox styling */
        .custom-checkbox { appearance: none; -webkit-appearance: none; height: 1rem; width: 1rem; border: 1px solid #d1d5db; border-radius: 0.25rem; display: inline-block; position: relative; cursor: pointer; vertical-align: middle; margin-right: 0.5rem; flex-shrink: 0; }
        .dark .custom-checkbox { border-color: #4b5563; background-color: #374151; }
        .custom-checkbox:checked { background-color: #3b82f6; border-color: #3b82f6; }
        .custom-checkbox:checked::after { content: '✓'; font-size: 0.8rem; color: white; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); line-height: 1; }
        .custom-checkbox:focus { outline: 2px solid transparent; outline-offset: 2px; --tw-ring-color: #60a5fa; box-shadow: 0 0 0 2px var(--tw-ring-color); }
        .dark .custom-checkbox:focus { --tw-ring-color: #3b82f6; }

        /* Static {lpurl} display styling */
        .static-lpurl { background-color: #e5e7eb; padding: 0.5rem 0.75rem; border-radius: 0.375rem; font-family: 'Consolas', 'Monaco', monospace; color: #374151; display: inline-block; border: 1px dashed #cbd5e1; line-height: normal; }
        .dark .static-lpurl { background-color: #374151; color: #d1d5db; border-color: #4b5563; }

        /* Accordion styling */
        .accordion-header { cursor: pointer; display: flex; justify-content: space-between; align-items: center; user-select: none; padding: 0.5rem 0.25rem; border-bottom: 1px solid #e5e7eb; margin-bottom: 0.5rem; }
        .dark .accordion-header { border-bottom-color: #374151; }
        .accordion-header h2, .accordion-header h3, .accordion-header h4 { margin-bottom: 0 !important; }
        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out, padding 0.3s ease-out; padding: 0 0.25rem; }
        .accordion-content.open { max-height: 4000px; /* A large enough value for content */ transition: max-height 0.5s ease-in, padding 0.3s ease-in; padding: 1rem 0.25rem; }
        .accordion-arrow, #ga4-toggle-arrow { transition: transform 0.3s ease; display: inline-flex; align-items: center; }
        .accordion-arrow svg, #ga4-toggle-arrow svg { transition: transform 0.3s ease; width: 20px; height: 20px; }
        #ga4-toggle-arrow.open svg { transform: rotate(180deg); } /* Specific for GA4 toggle arrow */
        .accordion-arrow.open svg { transform: rotate(90deg); } /* General accordion arrow */
        .accordion-search-input { margin-bottom: 1rem; }

        /* Copy message styling */
        .copy-message { display: none; font-size: 0.875rem; margin-left: 0.5rem; padding: 0.25rem 0.5rem; border-radius: 0.25rem; border-width: 1px; border-style: solid; line-height: normal; }
        .action-button:disabled { opacity: 0.5; cursor: not-allowed; }
        .generated-url-container { word-break: break-all; }

        /* Knowledge repo, guide, and info section styling */
        .knowledge-repo-entry, .valuetrack-guide article section, .meta-info-section article { margin-bottom: 1.5rem; padding-bottom: 1rem; border-bottom: 1px solid #e5e7eb; }
        .dark .knowledge-repo-entry, .dark .valuetrack-guide article section, .dark .meta-info-section article { border-bottom-color: #374151; }
        .knowledge-repo-entry:last-child, .valuetrack-guide article section:last-child, .meta-info-section article:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
        .knowledge-repo-entry h3, .valuetrack-guide h3, .meta-info-section h3 { font-size: 1.25rem; font-weight: 600; margin-top: 0; margin-bottom: 0.75rem; color: #1f2937; }
        .dark .knowledge-repo-entry h3, .dark .valuetrack-guide h3, .dark .meta-info-section h3 { color: #e5e7eb; }
        .knowledge-repo-entry h4, .valuetrack-guide h4, .meta-info-section h4 { font-size: 1.1rem; font-weight: 600; margin-top: 1.25rem; margin-bottom: 0.5rem; color: #1f2937; }
        .dark .knowledge-repo-entry h4, .dark .valuetrack-guide h4, .dark .meta-info-section h4 { color: #e5e7eb; }
        .knowledge-repo-entry h5, .valuetrack-guide h5, .meta-info-section h5 { font-size: 1rem; font-weight: 600; margin-top: 1rem; margin-bottom: 0.5rem; color: #374151; }
        .dark .knowledge-repo-entry h5, .dark .valuetrack-guide h5, .dark .meta-info-section h5 { color: #d1d5db; }
        .knowledge-repo-entry p, .knowledge-repo-entry li, .valuetrack-guide p, .valuetrack-guide li, .meta-info-section p, .meta-info-section li { font-size: 0.95rem; line-height: 1.65; margin-bottom: 0.75rem; color: #374151; }
        .dark .knowledge-repo-entry p, .dark .knowledge-repo-entry li, .dark .valuetrack-guide p, .dark .valuetrack-guide li, .dark .meta-info-section p, .dark .meta-info-section li { color: #d1d5db; }
        .knowledge-repo-entry ul, .valuetrack-guide ul, .meta-info-section ul { list-style-type: disc; padding-left: 1.5rem; margin-bottom: 1rem; }
        .knowledge-repo-entry code, .valuetrack-guide code, .meta-info-section code { background-color: #e5e7eb; color: #be123c; padding: 0.125rem 0.375rem; border-radius: 0.25rem; font-family: 'Consolas', 'Monaco', monospace; font-size: 0.875em; line-height: normal; }
        .dark .knowledge-repo-entry code, .dark .valuetrack-guide code, .dark .meta-info-section code { background-color: #374151; color: #fda4af; }
        .knowledge-repo-entry h4 code { font-size: 0.9em; font-weight: 600; color: #1f2937; } /* Code within H4 */
        .dark .knowledge-repo-entry h4 code { color: #f3f4f6; }

        /* Table styling for guides */
        .valuetrack-guide table, .meta-info-section table { width: 100%; margin-top: 1rem; margin-bottom: 1.5rem; border-collapse: collapse; font-size: 0.875rem; line-height: normal; }
        .valuetrack-guide th, .valuetrack-guide td, .meta-info-section th, .meta-info-section td { border: 1px solid #d1d5db; padding: 0.75rem; text-align: left; vertical-align: top; }
        .dark .valuetrack-guide th, .dark .valuetrack-guide td, .dark .meta-info-section th, .dark .meta-info-section td { border-color: #4b5563; }
        .valuetrack-guide th, .meta-info-section th { background-color: #f3f4f6; font-weight: 600; color: #111827; }
        .dark .valuetrack-guide th, .dark .meta-info-section th { background-color: #374151; color: #f3f4f6; }
        .valuetrack-guide strong, .knowledge-repo-entry strong, .meta-info-section strong { font-weight: 600; color: #111827; }
        .dark .valuetrack-guide strong, .dark .knowledge-repo-entry strong, .dark .meta-info-section strong { color: #f9fafb; }
        .valuetrack-guide .note, .knowledge-repo-entry .note, .meta-info-section .note { font-size: 0.8rem; color: #4b5563; margin-top: -0.5rem; margin-bottom: 1rem; font-style: italic; }
        .dark .valuetrack-guide .note, .dark .knowledge-repo-entry .note, .dark .meta-info-section .note { color: #9ca3af; }

        /* Full height layout for footer positioning */
        html, body { height: 100%; }
        .container { display: flex; flex-direction: column; min-height: 100%; }
        main { flex-grow: 1; }
        footer { line-height: normal; }
        footer p { line-height: normal; margin-bottom: 0.25rem; }

        /* Meta Ads specific input group */
        .meta-input-group-inline { display: flex; gap: 0.5rem; align-items: center; }
        .meta-input-group-inline input[type="text"] { flex-grow: 1; }
        .meta-input-group-inline select { min-width: 200px; }
        .dynamic-value-indicator { margin-left: 0.25rem; color: #3b82f6; /* blue-500 */ }
        .dark .dynamic-value-indicator { color: #60a5fa; /* blue-400 */ }

    </style>
</head>
<body class="bg-elevar-gray-bg dark:bg-elevar-dark-bg text-gray-900 dark:text-gray-100">
    <div class="container mx-auto p-4 md:p-8 max-w-5xl">
        <header class="flex justify-between items-center mb-6 pb-4 border-b border-gray-300 dark:border-gray-700">
            <h1 class="text-2xl md:text-3xl font-bold text-elevar-blue dark:text-elevar-blue-light">Unified Marketing URL & Tracking Builder</h1>
            <button id="theme-toggle" aria-label="Toggle dark mode" class="px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg shadow hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200 text-sm">
                <span id="theme-toggle-icon"><i data-lucide="sun"></i> Light</span>
            </button>
        </header>

        <nav class="mb-6 flex flex-wrap" aria-label="Tool selection">
            <button class="tab-button active" data-tab="ga4Tab" role="tab" aria-selected="true" aria-controls="ga4TabContent">GA4 UTM Builder</button>
            <button class="tab-button" data-tab="googleAdsTab" role="tab" aria-selected="false" aria-controls="googleAdsTabContent">Google Ads Tracking</button>
            <button class="tab-button" data-tab="microsoftAdsTab" role="tab" aria-selected="false" aria-controls="microsoftAdsTabContent">Microsoft Ads Tracking</button>
            <button class="tab-button" data-tab="metaAdsTab" role="tab" aria-selected="false" aria-controls="metaAdsTabContent">Meta Ads Tracking</button>
        </nav>

        <main>
            <section id="ga4TabContent" class="tab-content active" role="tabpanel" aria-labelledby="ga4Tab">
                <h2 class="text-xl font-semibold text-gray-800 dark:text-gray-200 mb-4">GA4 Campaign URL Builder</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="space-y-6">
                        <div class="form-section">
                            <label for="ga4-channel" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">GA4 Default Channel Group (Optional)</label>
                            <select id="ga4-channel" class="w-full">
                                <option value="">Select a Channel to see definition & filter suggestions</option>
                                </select>
                            <div id="ga4-channel-info-wrapper" class="mt-3 hidden channel-info-highlight">
                                <p id="ga4-channel-description" class="mb-1 font-medium"></p>
                                <p id="ga4-channel-conditions" class="font-mono"></p>
                            </div>
                            <div id="ga4-compliance-feedback" class="feedback-base mt-2">
                                </div>
                        </div>
                        <div class="form-section">
                            <label for="ga4-base-url" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 required">Website URL / Base URL</label>
                            <input type="url" id="ga4-base-url" placeholder="https://www.example.com" required>
                            <div id="ga4-base-url-error" class="input-error-message">Please enter a valid URL (e.g., http://, https://).</div>
                            <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">The full website URL (e.g., https://www.example.com/page).</p>
                        </div>
                        <div class="form-section">
                                <h3 class="text-lg font-semibold mb-3 text-gray-800 dark:text-gray-200">Options</h3>
                                <div class="flex items-center justify-between">
                                    <label for="ga4-force-lowercase" class="text-sm font-medium text-gray-700 dark:text-gray-300">
                                        Force UTM values to lowercase
                                        <span class="tooltip text-blue-500 dark:text-blue-400">ℹ️
                                            <span class="tooltiptext">Converts all utm_* parameter values to lowercase for consistency in GA4, which is case-sensitive.</span>
                                        </span>
                                    </label>
                                    <label class="switch">
                                        <input type="checkbox" id="ga4-force-lowercase">
                                        <span class="slider"></span>
                                    </label>
                                </div>
                        </div>
                    </div>
                    <div class="space-y-4 form-section">
                        <h3 class="text-lg font-semibold mb-3 text-gray-800 dark:text-gray-200">Core UTM Parameters</h3>
                        <div id="ga4-core-utm-inputs-container" class="space-y-4">
                            </div>
                        <div class="mt-6">
                            <button id="ga4-toggle-optional-params" class="w-full flex justify-between items-center text-left py-2 px-3 text-sm font-medium text-elevar-blue dark:text-elevar-blue-light hover:bg-gray-50 dark:hover:bg-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <span>Advanced UTM & GA4 Parameters</span>
                                <span id="ga4-toggle-arrow" class="transition-transform duration-200">
                                    <i data-lucide="chevron-down"></i>
                                </span>
                            </button>
                            <div id="ga4-optional-parameters-section" class="mt-4 space-y-4 hidden">
                                <h4 class="text-md font-semibold text-gray-600 dark:text-gray-400">Optional UTM Parameters</h4>
                                <div id="ga4-optional-utm-inputs-container" class="space-y-4">
                                    </div>
                                <h4 class="text-md font-semibold pt-2 text-gray-600 dark:text-gray-400 border-t border-gray-200 dark:border-gray-700">GA4 Specific Parameters</h4>
                                <div id="ga4-ga4-inputs-container" class="space-y-4">
                                    </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-section mt-8">
                   <label for="ga4-final-url" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Generated GA4 Campaign URL</label>
                    <textarea id="ga4-final-url" readonly rows="3" class="w-full bg-gray-50 dark:bg-gray-700"></textarea>
                    <div class="mt-2 flex items-center">
                        <button id="ga4-copy-url" class="action-button px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg shadow transition-colors duration-200 text-sm disabled:opacity-50" disabled>
                            Copy URL
                        </button>
                        <span id="ga4-copy-message" class="copy-message success">Copied!</span>
                         <span id="ga4-copy-error" class="copy-message error">Failed to copy!</span>
                    </div>
                </div>

                <div id="ga4-url-analyzer-section" class="form-section mt-8 pt-6 border-t border-gray-200 dark:border-gray-700">
                    <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4">
                        Analyze Existing Campaign URL
                    </h3>
                    <div class="form-group space-y-1 mb-4">
                        <label for="ga4-analyze-url-input" class="block text-sm font-medium text-gray-700 dark:text-gray-300">
                            Paste your full campaign URL here:
                        </label>
                        <input type="url" id="ga4-analyze-url-input"
                               placeholder="e.g., https://www.example.com/?utm_source=google&utm_medium=cpc&utm_campaign=spring_sale"
                               class="utm-input w-full">
                    </div>
                    <button id="ga4-predict-from-url-btn"
                            class="btn btn-primary py-2 px-4 bg-elevar-blue hover:bg-blue-700 text-white font-semibold rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                        Predict Channel for Pasted URL
                    </button>
                    <div id="ga4-analyzed-url-prediction-feedback"
                         class="feedback-base mt-4 p-3 rounded-md min-h-[40px] border border-transparent">
                        <span class="text-gray-500 dark:text-gray-400">Enter a URL above and click "Predict" to see its likely GA4 channel.</span>
                    </div>
                </div>
                <section class="form-section mt-8" aria-labelledby="config-heading">
                    <h3 id="config-heading" class="text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4">Save & Load GA4 Configuration</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 items-end">
                        <div>
                            <label for="configName" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Configuration Name</label>
                            <input type="text" id="configName" placeholder="e.g., GA4 Summer Sale" class="w-full">
                        </div>
                        <button id="saveConfigBtn" class="action-button bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg text-sm">
                            Save GA4 Configuration
                        </button>
                    </div>
                    <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4 items-end">
                        <div>
                            <label for="loadConfigSelect" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Load Saved GA4 Configuration</label>
                            <select id="loadConfigSelect" class="w-full">
                                <option value="">Select a configuration...</option>
                                </select>
                        </div>
                        <div class="flex gap-x-2">
                            <button id="loadConfigBtn" class="action-button flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg text-sm">Load Selected</button>
                            <button id="deleteConfigBtn" class="action-button flex-1 bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg text-sm">Delete Selected</button>
                        </div>
                    </div>
                    <div id="configActionFeedback" class="mt-2 text-sm h-5">
                        </div>
                </section>
            </section>

            <section id="googleAdsTabContent" class="tab-content" role="tabpanel" aria-labelledby="googleAdsTab">
                <h2 class="text-xl font-semibold text-gray-800 dark:text-gray-200 mb-4">Google Ads Tracking Template Builder</h2>
                <div class="param-group">
                    <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200 mb-4">1. Base URL & Standard UTMs</h3>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Base URL (Dynamic)</label>
                        <div class="mt-1 static-lpurl">{lpurl}</div>
                        <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">This will be dynamically replaced by Google Ads with your ad's final URL.</p>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="ads-utm_source" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Campaign Source (utm_source)</label>
                            <input type="text" id="ads-utm_source" value="google">
                        </div>
                        <div>
                            <label for="ads-utm_medium" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Campaign Medium (utm_medium)</label>
                            <input type="text" id="ads-utm_medium" value="cpc">
                        </div>
                        <div>
                            <label for="ads-utm_campaign" class="block text-sm font-medium text-gray-700 dark:text-gray-300">
                                Campaign Name (utm_campaign) <i data-lucide="variable" class="inline-block w-4 h-4 dynamic-value-indicator"></i>
                            </label>
                            <input type="text" id="ads-utm_campaign" value="{campaignname}" placeholder="e.g., summer_sale or {campaignname}">
                        </div>
                        <div>
                            <label for="ads-utm_term" class="block text-sm font-medium text-gray-700 dark:text-gray-300">
                                Campaign Term (utm_term) <i data-lucide="variable" class="inline-block w-4 h-4 dynamic-value-indicator"></i>
                            </label>
                            <input type="text" id="ads-utm_term" value="{keyword}" placeholder="e.g., running_shoes or {keyword}">
                        </div>
                        <div>
                            <label for="ads-utm_content" class="block text-sm font-medium text-gray-700 dark:text-gray-300">
                                Campaign Content (utm_content) <i data-lucide="variable" class="inline-block w-4 h-4 dynamic-value-indicator"></i>
                            </label>
                            <input type="text" id="ads-utm_content" value="{creative}" placeholder="e.g., banner_ad_1 or {creative}">
                        </div>
                    </div>
                </div>

                <div class="param-group">
                    <div id="ads-generalAccordionHeader" class="accordion-header">
                        <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200">2. General ValueTrack & Conditional Parameters</h3>
                        <span class="accordion-arrow"><i data-lucide="chevron-right"></i></span>
                    </div>
                    <div id="ads-generalAccordionContent" class="accordion-content">
                        <input type="search" id="ads-general-search" placeholder="Search parameters..." class="accordion-search-input w-full mb-4 p-2 border rounded">
                        <div class="space-y-6 pt-4">
                            <div>
                                <h4 class="text-md font-medium text-gray-700 dark:text-gray-300 mb-3">General & Ad Details</h4>
                                <div id="ads-general-params-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-4">
                                    </div>
                            </div>
                            <div>
                                <h4 class="text-md font-medium text-gray-700 dark:text-gray-300 mb-3">Network & Device</h4>
                                <div id="ads-network-device-params-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-4">
                                    </div>
                            </div>
                            <div>
                                <h4 class="text-md font-medium text-gray-700 dark:text-gray-300 mb-3">Targeting & Location</h4>
                                <div id="ads-targeting-location-params-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-4">
                                    </div>
                            </div>
                            <div>
                                <h4 class="text-md font-medium text-gray-700 dark:text-gray-300 mb-3">Conditional Parameters</h4>
                                <div id="ads-conditional-params-container" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    </div>
                            </div>
                            <div>
                                <h4 class="text-md font-medium text-gray-700 dark:text-gray-300 mb-3">Google Click ID (GCLID)</h4>
                                <div id="ads-gclid-param-container" class="flex items-center">
                                    </div>
                                <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Note: Google Ads auto-tagging usually appends `gclid`.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="param-group">
                     <div id="ads-industryAccordionHeader" class="accordion-header">
                        <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200">3. Industry-Specific & Campaign-Specific Parameters</h3>
                        <span class="accordion-arrow"><i data-lucide="chevron-right"></i></span>
                    </div>
                    <div id="ads-industryAccordionContent" class="accordion-content">
                        <input type="search" id="ads-industry-search" placeholder="Search parameters..." class="accordion-search-input w-full mb-4 p-2 border rounded">
                        <div class="space-y-6 pt-4">
                            <div>
                                <h4 class="text-md font-medium text-gray-700 dark:text-gray-300 mb-3">Shopping Campaigns Only</h4>
                                <div id="ads-shopping-params-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-4">
                                    </div>
                            </div>
                            <div>
                                <h4 class="text-md font-medium text-gray-700 dark:text-gray-300 mb-3">Video Campaigns Only</h4>
                                <div id="ads-video-params-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-4">
                                    </div>
                            </div>
                            <div>
                                <h4 class="text-md font-medium text-gray-700 dark:text-gray-300 mb-3">Hotel Campaigns Only</h4>
                                <div id="ads-hotel-params-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-4">
                                    </div>
                            </div>
                             <div>
                                <h4 class="text-md font-medium text-gray-700 dark:text-gray-300 mb-3">Performance Max Campaigns</h4>
                                <div id="ads-pmax-params-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-4">
                                    </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mt-8 mb-6 flex flex-col sm:flex-row justify-center items-center space-y-3 sm:space-y-0 sm:space-x-4">
                    <button id="ads-generateBtn" class="action-button w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg shadow-md">Generate Tracking String</button>
                    <button id="ads-resetBtn" class="action-button w-full sm:w-auto bg-gray-500 hover:bg-gray-600 text-white font-semibold py-3 px-6 rounded-lg shadow-md">Reset Fields</button>
                </div>
                <div id="ads-resultContainer" class="param-group generated-url-container hidden">
                    <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200 mb-3">Generated Google Ads Tracking String:</h3>
                    <div class="bg-gray-100 dark:bg-gray-700 p-4 rounded-md shadow">
                        <p id="ads-generatedUrl" class="text-sm text-gray-800 dark:text-gray-200"></p>
                    </div>
                    <button id="ads-copyBtn" class="action-button mt-4 bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md">Copy to Clipboard</button>
                    <span id="ads-copy-message" class="copy-message success">Copied!</span>
                    <span id="ads-copy-error" class="copy-message error">Failed to copy!</span>
                </div>
                <article class="valuetrack-guide param-group mt-8">
                    <h2 class="text-xl font-bold text-gray-800 dark:text-gray-200 mb-6 text-center">Google Ads ValueTrack Parameters Guide</h2>
                    
                    <section>
                        <h3>What are ValueTrack Parameters?</h3>
                        <p>ValueTrack parameters are used to track information about the source of an ad click. By adding these parameters to your ads and campaigns, you can identify if people who clicked on your ads used mobile devices, where they were located when they clicked your ads, and much more.</p>
                        <p>It's suggested to use ValueTrack parameters in your tracking template, but you can also insert them in your final URL and custom parameters. Note: ValueTrack IDs are 64-bit.</p>
                    </section>
    
                    <section>
                        <h3>How it Works</h3>
                        <p>Tracking templates at the account, campaign, or ad group level must include a ValueTrack parameter that inserts your final URL, like <code>{lpurl}</code>. When your ad is clicked, these parameters will insert your final URL. If you don’t include a URL insertion parameter in your tracking template, your landing page URL will break.</p>
                        <p>If you want to add more than one ValueTrack parameter to a single URL, simply append them together in your URL using an ampersand (&amp;), like this: <code>{lpurl}?matchtype={matchtype}&amp;device={device}</code>.</p>
                        <p class="note">Dynamic Search Ads and auto-targets require ValueTrack parameters that insert the final URL (for example, <code>{lpurl}</code>, <code>{escapedlpurl}</code>, <code>{lpurl+2}</code>) at all levels.</p>
                    </section>
    
                    <section>
                        <h3>Available ValueTrack Parameters</h3>
                        <p>Below is a list of commonly used ValueTrack parameters. Refer to the official Google Ads documentation for a complete and up-to-date list.</p>
    
                        <h4>For Final URL, Tracking Template, or Custom Parameter:</h4>
                        <table>
                            <thead>
                                <tr>
                                    <th>Parameter</th>
                                    <th>What it returns</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td><code>{campaignid}</code></td><td>The campaign ID.</td></tr>
                                <tr><td><code>{adgroupid}</code></td><td>The ad group ID.</td></tr>
                                <tr><td><code>{feeditemid}</code></td><td>The ID of the feed-based or legacy asset that was clicked. (Not available for Display ads).</td></tr>
                                <tr><td><code>{extensionid}</code></td><td>The ID of the asset-based or upgraded asset that was clicked. (Not available for Display ads).</td></tr>
                                <tr><td><code>{targetid}</code></td><td>The ID of the keyword ("kwd"), dynamic search ad ("dsa") target, remarketing list target ("aud"), product partition ("pla"), or hotel group partition ("hpi") that triggered an ad. For multiple target IDs, the output shows in the order: "aud, dsa, kwd, pla, hpi".</td></tr>
                                <tr><td><code>{loc_interest_ms}</code></td><td>The ID of the location of interest that helped trigger the ad.</td></tr>
                                <tr><td><code>{loc_physical_ms}</code></td><td>The ID of the geographical location of the click.</td></tr>
                                <tr><td><code>{matchtype}</code></td><td>The match type of the keyword: "e" (exact), "p" (phrase), or "b" (broad).</td></tr>
                                <tr><td><code>{network}</code></td><td>Where the click came from: “g” (Google search), “s” (search partners), “d” (Display Network), “ytv” (YouTube), “vp” (Google video partners), “gtv” (Google TV), “x” (all Performance Max traffic), “e” (all App campaigns for engagement (ACe) traffic, except Google search traffic).</td></tr>
                                <tr><td><code>{device}</code></td><td>Device: "m" (mobile), "t" (tablet), "c" (computer).</td></tr>
                                <tr><td><code>{devicemodel}</code></td><td>Phone or tablet model (e.g., "Apple+iPhone"). Only for Display Network campaigns.</td></tr>
                                <tr><td><code>{gclid}</code></td><td>The Google click identifier.</td></tr>
                                <tr><td><code>{ifmobile:[value]}</code></td><td>Inserts your defined "[value]" if the click is from a mobile phone.</td></tr>
                                <tr><td><code>{ifnotmobile:[value]}</code></td><td>Inserts your defined "[value]" if the click is from a computer or tablet.</td></tr>
                                <tr><td><code>{ifsearch:[value]}</code></td><td>Inserts your defined "[value]" if the click is from the Google Search Network.</td></tr>
                                <tr><td><code>{ifcontent:[value]}</code></td><td>Inserts your defined "[value]" if the click is from the Google Display Network.</td></tr>
                                <tr><td><code>{creative}</code></td><td>A unique ID for your ad.</td></tr>
                                <tr><td><code>{keyword}</code></td><td>For Search: keyword matching the query (blank for AI Max for Search, DSA, PMax without keywords). For Display: keyword matching content.</td></tr>
                                <tr><td><code>{placement}</code></td><td>Content site where ad was clicked (keyword-targeted) or matching placement criteria (placement-targeted).</td></tr>
                                <tr><td><code>{target}</code></td><td>A placement category (for placement-targeted campaigns only).</td></tr>
                                <tr><td><code>{param1}</code>, <code>{param2}</code></td><td>Creative parameters if using AdParamService with Google Ads API.</td></tr>
                                <tr><td><code>{random}</code></td><td>A random Google-generated number (unsigned 64-bit integer).</td></tr>
                            </tbody>
                        </table>
    
                        <h4>Tracking Template Only (Recommended):</h4>
                         <table>
                            <thead>
                                <tr>
                                    <th>Parameter</th>
                                    <th>What it returns</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td><code>{lpurl}</code></td><td>The final URL. Escaped unless at the beginning of the template.</td></tr>
                                <tr><td><code>{lpurl+2}</code></td><td>The final URL escaped twice. Useful when you have a chain of redirects.</td></tr>
                                <tr><td><code>{lpurl+3}</code></td><td>The final URL escaped 3 times. Useful when you have a chain of redirects.</td></tr>
                                <tr><td><code>{unescapedlpurl}</code></td><td>The final URL unescaped.</td></tr>
                                <tr><td><code>{escapedlpurl}</code></td><td>The final URL escaped. Escapes the characters :, /, ?, =, and %.</td></tr>
                                <tr><td><code>{escapedlpurl+2}</code></td><td>The final URL escaped twice. Useful when you have a chain of redirects.</td></tr>
                                <tr><td><code>{escapedlpurl+3}</code></td><td>The final URL escaped 3 times. Useful when you have a chain of redirects.</td></tr>
                            </tbody>
                        </table>
                        <p class="note">Important: When using <code>{lpurl}</code> not at the beginning of the template, or other advanced parameters, ensure you follow them with the correct characters (e.g., <code>?</code>, <code>%3F</code>, <code>%253F</code>) depending on their position to ensure your URL parameters are parsed correctly.</p>
    
    
                        <h4>Final URL Only:</h4>
                         <table>
                            <thead>
                                <tr>
                                    <th>Parameter</th>
                                    <th>What it does</th>
                                </tr>
                            </thead>
                            <tbody>
                                 <tr><td><code>{ignore}</code></td><td>Ignores tracking elements of your final URL to help reduce crawl load. It can only be used in your final or final mobile URL. Example: <code>http://www.example.com/product?{ignore}p1=a&amp;p2=b</code></td></tr>
                            </tbody>
                        </table>
                    </section>
                    
                    <section>
                        <h4>Shopping Campaigns Only Parameters:</h4>
                        <table>
                            <thead>
                                <tr><th>Parameter</th><th>What it returns</th></tr>
                            </thead>
                            <tbody>
                                <tr><td><code>{adtype}</code></td><td>Returns "pla" if the click is from a Shopping ad, "pla_multichannel" if the ad included options for both “online” and “local” shopping channels, "pla_with_promotion" if the ad displayed a merchant promotion, or "pla_with_pog" if from a Purchases on Google-enabled Shopping ad.</td></tr>
                                <tr><td><code>{merchant_id}</code></td><td>The ID of the Merchant Center account directly owning the clicked Shopping ad.</td></tr>
                                <tr><td><code>{product_channel}</code></td><td>The type of shopping channel (“online” or “local”) through which the product featured in the clicked Shopping ad is sold. If an ad includes options for both shopping channels, {product_channel} will show the type of channel clicked on (“online” or “local”) and {adtype} will show “pla_multichannel.”</td></tr>
                                <tr><td><code>{product_id}</code></td><td>The ID of the product featured in the clicked ad, as indicated in your Merchant Center data feed.</td></tr>
                                <tr><td><code>{product_country}</code></td><td>The country of sale for the product in the clicked ad.</td></tr>
                                <tr><td><code>{product_language}</code></td><td>The language of your product information, as indicated in your Merchant Center data feed.</td></tr>
                                <tr><td><code>{product_partition_id}</code></td><td>The unique ID for the product group the clicked product ad belongs to.</td></tr>
                                <tr><td><code>{store_code}</code></td><td>For local products in Shopping campaigns, you’ll find the unique ID of the local store. This parameter has a 60 character limit.</td></tr>
                            </tbody>
                        </table>
                    </section>
    
                    <section>
                        <h4>Video Campaigns Only Parameters:</h4>
                         <table>
                            <thead>
                                <tr><th>Parameter</th><th>What it returns</th></tr>
                            </thead>
                            <tbody>
                                <tr><td><code>{adgroupid}</code></td><td>The ad group ID.</td></tr>
                                <tr><td><code>{campaignid}</code></td><td>The campaign ID.</td></tr>
                                <tr><td><code>{creative}</code></td><td>A unique ID for your ad.</td></tr>
                                <tr><td><code>{device}</code></td><td>Device: "m", "t", or "c".</td></tr>
                                <tr><td><code>{loc_interest_ms}</code></td><td>ID of location of interest.</td></tr>
                                <tr><td><code>{loc_physical_ms}</code></td><td>ID of physical location of click.</td></tr>
                                <tr><td><code>{network}</code></td><td>Where the click came from (e.g., "ytv" for YouTube).</td></tr>
                                <tr><td><code>{placement}</code></td><td>Content site or placement criteria.</td></tr>
                                <tr><td><code>{sourceid}</code></td><td>ID of the source (e.g., App ID for app promotion).</td></tr>
                            </tbody>
                        </table>
                    </section>
                    
                    <section>
                        <h4>Hotel Campaigns Only Parameters:</h4>
                         <table>
                            <thead>
                                <tr><th>Parameter</th><th>What it returns</th></tr>
                            </thead>
                            <tbody>
                                <tr><td><code>{hotelcenter_id}</code></td><td>The ID of the Hotel Center account linked to the campaign.</td></tr>
                                <tr><td><code>{hotel_id}</code></td><td>The hotel ID from the associated account’s hotel feed.</td></tr>
                                <tr><td><code>{hotel_partition_id}</code></td><td>The unique ID of the hotel group that the clicked hotel ad belongs to.</td></tr>
                                <tr><td><code>{hotel_adtype}</code></td><td>"Hotel" if an ad for a hotel was clicked; "Room" if an ad for a Room Bundle was clicked.</td></tr>
                                <tr><td><code>{travel_start_day}</code>, <code>{travel_start_month}</code>, <code>{travel_start_year}</code></td><td>The check-in date’s day, month, and year displayed in the ad.</td></tr>
                                <tr><td><code>{travel_end_day}</code>, <code>{travel_end_month}</code>, <code>{travel_end_year}</code></td><td>The check-out day, month, and year displayed in the ad.</td></tr>
                                <tr><td><code>{advanced_booking_window}</code></td><td>The number of days between the date of the ad click and the check-in date being advertised.</td></tr>
                                <tr><td><code>{date_type}</code></td><td>“default” if Google selected the dates; “selected” if the end-user picked the dates.</td></tr>
                                <tr><td><code>{number_of_adults}</code></td><td>The number of adults who will stay in the room shown in the ad.</td></tr>
                                <tr><td><code>{price_displayed_total}</code></td><td>The total cost of the room displayed in the user's local currency.</td></tr>
                                <tr><td><code>{price_displayed_tax}</code></td><td>The amount of taxes and fees displayed in the user's local currency.</td></tr>
                                <tr><td><code>{user_currency}</code></td><td>Three-letter currency code indicating the user's local currency (e.g., "USD").</td></tr>
                                <tr><td><code>{user_language}</code></td><td>The two-letter language code specifying the display language of the ad (e.g., "en").</td></tr>
                                <tr><td><code>{adtype}</code> (for Travel)</td><td>The type of Travel ad: “travel_booking” or “travel_promoted”.</td></tr>
                                <tr><td><code>{rate_rule_id}</code></td><td>The identifier of any special price that was clicked on.</td></tr>
                            </tbody>
                        </table>
                    </section>
    
                    <section>
                        <h4>Demand Gen Ads Campaigns:</h4>
                        <p>The following ValueTrack parameters aren't supported for Demand Gen ads: <code>{placement}</code>, <code>{target}</code>, <code>{keyword}</code>, <code>{ifsearch:[value]}</code>, <code>{ifcontent:[value]}</code>, <code>{network}</code>.</p>
                    </section>
    
                    <section>
                        <h4>Performance Max Campaigns:</h4>
                        <p>Some ValueTrack parameters are fully supported within Performance Max campaigns. Parameters with limited support only apply to some channels or ad formats within the campaign.</p>
                        <h5>Examples of Fully Supported Parameters:</h5>
                        <ul>
                            <li><code>{campaignid}</code></li>
                            <li><code>{device}</code></li>
                            <li><code>{ifmobile:[value]}</code>, <code>{ifnotmobile:[value]}</code></li>
                            <li><code>{loc_interest_ms}</code>, <code>{loc_physical_ms}</code></li>
                            <li><code>{lpurl}</code>, <code>{lpurl+2}</code>, <code>{lpurl+3}</code></li>
                            <li><code>{random}</code></li>
                        </ul>
                         <h5>Examples of Parameters with Limited Support:</h5>
                         <ul>
                            <li><code>{adtype}</code> (for Shopping ads within PMax)</li>
                            <li><code>{gclid}</code></li>
                            <li><code>{merchant_id}</code>, <code>{product_channel}</code>, <code>{product_country}</code>, <code>{product_id}</code>, <code>{product_language}</code> (for Shopping ads within PMax)</li>
                         </ul>
                    </section>
    
                    <section>
                        <h3>Best Practices</h3>
                        <ul>
                            <li><strong>Parallel Tracking:</strong> This is the only click measurement method for all accounts. It helps load your landing page more quickly by sending customers directly to your final URL while click measurement happens in the background.</li>
                            <li><strong>Avoid Spaces:</strong> Do not use spaces in your URLs as they can break tracking. Use <code>%20</code> if a space is necessary (e.g., in a keyword value).</li>
                            <li><strong>Test Your Tracking:</strong> Always use the "Test" button in Google Ads when setting up or editing tracking templates.</li>
                        </ul>
                    </section>
                </article>
                </section>

            <section id="microsoftAdsTabContent" class="tab-content" role="tabpanel" aria-labelledby="microsoftAdsTab">
                 <h2 class="text-xl font-semibold text-gray-800 dark:text-gray-200 mb-4">Microsoft Advertising Tracking Template Builder</h2>
                <div class="param-group">
                    <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200 mb-4">1. Base URL & Standard Tracking Parameters</h3>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Base URL (Dynamic)</label>
                        <div class="mt-1 static-lpurl">{lpurl}</div>
                        <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">This will be dynamically replaced by Microsoft Advertising with your ad's final URL.</p>
                    </div>
                    <div id="msads-standard-params-container" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        </div>
                </div>
                <div class="param-group">
                    <div id="msads-accordionHeader" class="accordion-header">
                        <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200">2. Microsoft Advertising URL Parameters (Optional)</h3>
                        <span id="msads-accordionArrow" class="accordion-arrow"><i data-lucide="chevron-right"></i></span>
                    </div>
                    <div id="msads-accordionContent" class="accordion-content">
                        <input type="search" id="msads-params-search" placeholder="Search parameters..." class="accordion-search-input w-full mb-4 p-2 border rounded">
                        <div class="space-y-6 pt-4">
                            <div>
                                <h4 class="text-md font-medium text-gray-700 dark:text-gray-300 mb-3">General & Ad Details</h4>
                                <div id="msads-checkbox-params-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-4">
                                    </div>
                            </div>
                            <div>
                                <h4 class="text-md font-medium text-gray-700 dark:text-gray-300 mb-3 mt-6">Parameters Requiring Default Value</h4>
                                <div id="msads-default-value-params-container" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    </div>
                            </div>
                            <div>
                                <h4 class="text-md font-medium text-gray-700 dark:text-gray-300 mb-3 mt-6">Conditional Parameters</h4>
                                 <div id="msads-conditional-params-container" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                     </div>
                            </div>
                        </div>
                    </div>
                </div>
                 <div class="mt-8 mb-6 flex flex-col sm:flex-row justify-center items-center space-y-3 sm:space-y-0 sm:space-x-4">
                    <button id="msads-generateBtn" class="action-button w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg shadow-md">Generate Tracking String</button>
                    <button id="msads-resetBtn" class="action-button w-full sm:w-auto bg-gray-500 hover:bg-gray-600 text-white font-semibold py-3 px-6 rounded-lg shadow-md">Reset Fields</button>
                </div>
                <div id="msads-resultContainer" class="param-group generated-url-container hidden">
                    <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200 mb-3">Generated Microsoft Ads Tracking String:</h3>
                    <div class="bg-gray-100 dark:bg-gray-700 p-4 rounded-md shadow">
                        <p id="msads-generatedUrl" class="text-sm text-gray-800 dark:text-gray-200"></p>
                    </div>
                    <button id="msads-copyBtn" class="action-button mt-4 bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md">Copy to Clipboard</button>
                    <span id="msads-copy-message" class="copy-message success">Copied!</span>
                     <span id="msads-copy-error" class="copy-message error">Failed to copy!</span>
                </div>
                <article id="msads-knowledgeRepository" class="param-group mt-12 knowledge-repo-entry">
                    <h2 class="text-xl font-bold text-gray-800 dark:text-gray-200 mb-6 text-center">Microsoft Advertising Tracking Parameters Guide</h2>
                    
                    <section>
                        <h3>What is URL tracking in Microsoft Advertising?</h3>
                        <p>You add URL parameters to your destination URL or tracking template to find out how visitors got to your website. URL parameters allow you to track information about the source of an ad click.</p>
                        <p>The structure is always a parameter, enclosed by {}, that tells Microsoft Advertising what data you want returned, and a variable you define to store that data: <code>www.yourLandingPageURL.com?variable={parameter}</code>.</p>
                        <p>If adding multiple pairs, separate them with an ampersand (&amp;).</p>
                    </section>
    
                    <section>
                        <h3>Available parameters for: Destination URL, Final URLs, Tracking Templates and Custom Parameters</h3>
                        <table>
                            <thead>
                                <tr><th>Parameter</th><th>What it returns</th></tr>
                            </thead>
                            <tbody>
                                <tr><td><code>{CampaignId}</code></td><td>The ID of the campaign that triggered the ad.</td></tr>
                                <tr><td><code>{Campaign}</code></td><td>The name of the campaign that triggered the ad.</td></tr>
                                <tr><td><code>{AdGroupId}</code></td><td>The ID of the ad group that triggered the ad.</td></tr>
                                <tr><td><code>{AdGroup}</code></td><td>The name of the ad group that triggered the ad.</td></tr>
                                <tr><td><code>{TargetId}</code></td><td>ID of the keyword ("kwd"), remarketing or audience list ("aud"), dynamic ad target ("dat"), product partition ("pla"), or targeted location ID ("loc") that triggered the ad. If there are more than one ID, they will appear in the following order: aud, dat, kwd, pla. (Note: In-market audiences and LinkedIn profile targeting cannot be tracked through this parameter).</td></tr>
                                <tr><td><code>{MatchType}</code></td><td>The match type used to deliver an ad (e=exact, p=phrase, b=broad/expanded). This can be different from {BidMatchType}.</td></tr>
                                <tr><td><code>{BidMatchType}</code></td><td>The keyword bid match type (be=bidded exact, bp=bidded phrase, bb=bidded broad).</td></tr>
                                <tr><td><code>{Network}</code></td><td>The ad network type on which the ad was served: "o" (owned and operated - Bing, AOL, Yahoo), "s" (syndicated - search partner sites), "a" (audience placements).</td></tr>
                                <tr><td><code>{Device}</code></td><td>Click source: "m" (mobile device), "t" (tablet device), "c" (desktop or laptop computer).</td></tr>
                                <tr><td><code>{IfMobile:string}</code></td><td>The string text (that you define) to the right of the colon if the ad is displayed on a mobile device.</td></tr>
                                <tr><td><code>{IfNotMobile:string}</code></td><td>The string text (that you define) to the right of the colon if the ad is displayed on a computer, laptop, or tablet device.</td></tr>
                                <tr><td><code>{IfSearch:string}</code></td><td>The string text (that you define) to the right of the colon if the ad is displayed in search placements.</td></tr>
                                <tr><td><code>{IfNative:string}</code></td><td>The string text (that you define) to the right of the colon will be substituted into the URL if the ad is displayed as a Microsoft Audience ad.</td></tr>
                                <tr><td><code>{IfPLA:string}</code></td><td>The string text (that you define) to the right of the colon will be substituted into the URL if the ad is displayed as a product ad.</td></tr>
                                <tr><td><code>{AdId}</code></td><td>The numeric ID of the displayed ad.</td></tr>
                                <tr><td><code>{keyword:default}</code></td><td>Substitutes the keyword that matched the user's search term. Spaces in the keyword will each be substituted with "%20". Provide a default string if substitution exceeds URL limit or keyword is empty.</td></tr>
                                <tr><td><code>{msclkid}</code></td><td>A unique ClickID for the clicks on the ad.</td></tr>
                                <tr><td><code>{OrderItemId}</code></td><td>The numeric ID for the keyword that triggered the display of your ad. For Shopping campaigns, {OrderItemId} will return the product group ID.</td></tr>
                                <tr><td><code>{param1:default}</code>, <code>{param2:default}</code>, <code>{param3:default}</code></td><td>Substitutes {ParamX} in the URL with the ParamX setting of the keyword that matched the user's search term. Provide a default string.</td></tr>
                                <tr><td><code>{QueryString}</code></td><td>The search query text that the user entered.</td></tr>
                                <tr><td><code>{feeditemid}</code></td><td>The ID of the ad extension that was clicked.</td></tr>
                                <tr><td><code>{loc_physical_ms}</code></td><td>The geographical location code of the physical location of the click.</td></tr>
                                <tr><td><code>{loc_interest_ms}</code></td><td>The geographical location code of the location of interest that triggered the ad.</td></tr>
                            </tbody>
                        </table>
                         <p class="note"><code>{copy:queryparameter}</code> doesn't work with final URLs but does work with destination URLs for ad extensions to copy query parameters from the ad’s resolved destination URL.</p>
                    </section>
    
                    <section>
                        <h3>Tracking Templates Only</h3>
                        <p>Tracking templates should include a parameter that inserts your landing page URL using either <code>{lpurl}</code> or other advanced parameters. If you don’t include a URL insertion parameter, your landing page URL will break.</p>
                        <table>
                            <thead>
                                <tr><th>Parameter</th><th>Notes & Example Structure</th></tr>
                            </thead>
                            <tbody>
                                <tr><td><code>{lpurl}</code> (Basic)</td><td>Use when tracking on the landing page. Ex: <code>{lpurl}?matchtype={matchtype}</code>.</td></tr>
                                <tr><td><code>{lpurl}</code> (1 redirect + params to tracker)</td><td>Ex: <code>http://tracker.com?url={lpurl}&amp;matchtype={matchtype}</code>.</td></tr>
                                <tr><td><code>{lpurl}</code> (1 redirect + params to landing page via template)</td><td>Ex: <code>http://tracker.com?url={lpurl}%3F%26matchtype={matchtype}</code> (use <code>%3F</code> for '?' and <code>%26</code> for '&amp;' after <code>{lpurl}</code> if <code>{lpurl}</code> is not at the beginning).</td></tr>
                                <tr><td><code>{lpurl}</code> (1 redirect + params to landing page in Final URL)</td><td>Final URL: <code>http://example.com?matchtype={matchtype}</code>, Template: <code>http://tracker.com?url={lpurl}</code>.</td></tr>
                            </tbody>
                        </table>
                        <p class="note">It is recommended to put <code>{lpurl}</code> at the beginning of the tracking template. If not, the final URL will be escaped.</p>
    
                        <h4>Advanced URL Insertion Parameters:</h4>
                         <table>
                            <thead>
                                <tr><th>Parameter</th><th>What it returns</th></tr>
                            </thead>
                            <tbody>
                                <tr><td><code>{lpurl+2}</code></td><td>The Final URL escaped twice (for 2 redirects).</td></tr>
                                <tr><td><code>{lpurl+3}</code></td><td>The Final URL escaped three times (for 3 redirects).</td></tr>
                                <tr><td><code>{unescapedlpurl}</code></td><td>The Final URL, unescaped.</td></tr>
                                <tr><td><code>{escapedlpurl}</code></td><td>The Final URL, escaped.</td></tr>
                                <tr><td><code>{escapedlpurl+2}</code></td><td>The Final URL, escaped twice.</td></tr>
                                <tr><td><code>{escapedlpurl+3}</code></td><td>The Final URL, escaped three times.</td></tr>
                            </tbody>
                        </table>
                        <p class="note">Follow these URL insertion parameters with appropriate characters (<code>?</code>, <code>%3F</code>, <code>%253F</code>, etc.) depending on their position in the template.</p>
                    </section>
    
                    <section>
                        <h3>Final URL Only</h3>
                         <table>
                            <thead>
                                <tr><th>Parameter</th><th>What it does</th></tr>
                            </thead>
                            <tbody>
                                <tr><td><code>{ignore}</code></td><td>Ignores tracking elements of your Final URL. Use if tracking info after '?' doesn't change the landing page. Ex: <code>http://www.example.com/product?{ignore}p1=a&amp;p2=b</code>.</td></tr>
                            </tbody>
                        </table>
                    </section>
    
                    <section>
                        <h3>Microsoft Shopping Campaigns Only</h3>
                         <table>
                            <thead>
                                <tr><th>Parameter</th><th>What it returns</th></tr>
                            </thead>
                            <tbody>
                                <tr><td><code>{CriterionId}</code> / <code>{OrderItemId}</code></td><td>Identifier of the Microsoft Shopping product group.</td></tr>
                                <tr><td><code>{product_channel}</code></td><td>Shopping channel ("online" or "local").</td></tr>
                                <tr><td><code>{product_country}</code></td><td>Country of sale (e.g., US, UK).</td></tr>
                                <tr><td><code>{ProductId}</code></td><td>Numeric ID of the product from Merchant Center.</td></tr>
                                <tr><td><code>{product_language}</code></td><td>Language of product info (e.g., EN, FR).</td></tr>
                                <tr><td><code>{seller_name}</code></td><td>Seller name from feed or store name.</td></tr>
                            </tbody>
                        </table>
                    </section>
    
                    <section>
                        <h3>Microsoft Lodging Campaigns Only</h3>
                         <table>
                            <thead>
                                <tr><th>Parameter</th><th>What it returns</th></tr>
                            </thead>
                            <tbody>
                                <tr><td><code>{hotelcenter_id}</code></td><td>Hotel Center account ID.</td></tr>
                                <tr><td><code>{property_id}</code></td><td>Property ID from feed.</td></tr>
                                <tr><td><code>{hotel_partition_id}</code></td><td>Property group ID.</td></tr>
                                <tr><td><code>{hotel_adtype}</code></td><td>"Hotel" or "Room".</td></tr>
                                <tr><td><code>{travel_start_day/month/year}</code></td><td>Check-in date components.</td></tr>
                                <tr><td><code>{travel_end_day/month/year}</code></td><td>Check-out date components.</td></tr>
                                <tr><td><code>{advanced_booking_window}</code></td><td>Days between click and check-in.</td></tr>
                                <tr><td><code>{date_type}</code></td><td>"default" or "selected".</td></tr>
                                <tr><td><code>{number_of_adults}</code></td><td>Number of adults.</td></tr>
                                <tr><td><code>{price_displayed_total}</code></td><td>Total cost in user's currency.</td></tr>
                                <tr><td><code>{price_displayed_tax}</code></td><td>Taxes and fees in user's currency.</td></tr>
                                <tr><td><code>{user_currency}</code></td><td>User's local currency code.</td></tr>
                                <tr><td><code>{user_language}</code></td><td>Display language code.</td></tr>
                                <tr><td><code>{adtype}</code> (for Travel)</td><td>"travel_booking" or "travel_promoted".</td></tr>
                                <tr><td><code>{rate_rule_id}</code></td><td>Identifier of special price clicked.</td></tr>
                            </tbody>
                        </table>
                    </section>
                </article>
                </section>

            <section id="metaAdsTabContent" class="tab-content" role="tabpanel" aria-labelledby="metaAdsTab">
                <h2 class="text-xl font-semibold text-gray-800 dark:text-gray-200 mb-6">Meta (Facebook & Instagram) Dynamic UTM Builder</h2>
                
                <div class="form-section">
                    <label for="meta-websiteUrl" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 required">Website URL</label>
                    <input type="url" id="meta-websiteUrl" placeholder="https://www.yourwebsite.com" required>
                     <span id="meta-websiteUrl-error" class="input-error-message">Please enter a valid URL (e.g., http:// or https://).</span>
                    <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">Your full landing page URL.</p>
                </div>

                <div class="form-section">
                    <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200 mb-4">UTM Parameters</h3>
                    <div class="space-y-4">
                        <div class="form-group">
                            <label for="meta-utmSource" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 required">Campaign Source (utm_source)</label>
                            <div class="combobox-container">
                                <input type="text" id="meta-utmSource" placeholder="e.g., facebook or {{site_source_name}}" autocomplete="off" class="utm-input w-full">
                                <div id="meta-utmSource-dropdown" class="combobox-dropdown hidden">
                                    </div>
                            </div>
                            <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">Identifies the advertiser. Meta may set this automatically.</p>
                        </div>
                        <div class="form-group">
                            <label for="meta-utmMedium" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 required">Campaign Medium (utm_medium)</label>
                            <div class="combobox-container">
                                <input type="text" id="meta-utmMedium" placeholder="e.g., cpc, social_paid or {{placement}}" autocomplete="off" class="utm-input w-full">
                                <div id="meta-utmMedium-dropdown" class="combobox-dropdown hidden">
                                    </div>
                            </div>
                            <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">The marketing medium. Meta may set this to 'paid'.</p>
                        </div>
                        <div class="form-group">
                            <label for="meta-utmCampaign" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 required">Campaign Name (utm_campaign)</label>
                            <div class="combobox-container">
                                <input type="text" id="meta-utmCampaign" placeholder="e.g., summer_sale or {{campaign.name}}" autocomplete="off" class="utm-input w-full">
                                <div id="meta-utmCampaign-dropdown" class="combobox-dropdown hidden">
                                    </div>
                            </div>
                            <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">Your specific campaign name.</p>
                        </div>
                        <div class="form-group">
                            <label for="meta-utmTerm" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Campaign Term (utm_term)</label>
                            <input type="text" id="meta-utmTerm" placeholder="e.g., specific_audience_or_keyword" class="w-full">
                            <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">Identify paid keywords or audience targeting.</p>
                        </div>
                        <div class="form-group">
                            <label for="meta-utmContent" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Campaign Content (utm_content)</label>
                            <div class="combobox-container">
                                <input type="text" id="meta-utmContent" placeholder="e.g., video_ad_variant_1 or {{ad.name}}" autocomplete="off" class="utm-input w-full">
                                <div id="meta-utmContent-dropdown" class="combobox-dropdown hidden">
                                    </div>
                            </div>
                            <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">Differentiate ads or links within the same campaign.</p>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200 mb-4">Additional Custom Parameters</h3>
                    <div id="meta-customParamsContainer" class="space-y-3">
                        </div>
                    <button id="meta-addCustomParam" class="mt-3 text-sm bg-sky-600 hover:bg-sky-700 text-white font-medium py-2 px-4 rounded-lg transition duration-150 ease-in-out">
                        Add Custom Parameter
                    </button>
                </div>

                <div class="form-section mt-8">
                    <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200 mb-2">Generated Meta Ads URL</h3>
                    <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg shadow">
                        <textarea id="meta-generatedUrl" rows="5" readonly class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-900 resize-none focus:outline-none"></textarea>
                        <button id="meta-copyUrlButton" class="action-button mt-3 w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-150 ease-in-out disabled:opacity-50" disabled>
                            Copy to Clipboard
                        </button>
                        <span id="meta-copy-message-success" class="copy-message success">Copied!</span>
                        <span id="meta-copy-message-error" class="copy-message error">Failed to copy!</span>
                    </div>
                </div>

                <div class="meta-info-section param-group mt-8">
                     <div id="meta-autoParamsAccordionHeader" class="accordion-header">
                        <h4 class="text-md font-medium text-gray-700 dark:text-gray-300">Meta's Automatic Parameters</h4>
                        <span class="accordion-arrow"><i data-lucide="chevron-right"></i></span>
                    </div>
                    <div id="meta-autoParamsAccordionContent" class="accordion-content">
                        <article>
                            <p class="text-sm text-gray-600 dark:text-gray-300 mb-2">Meta may automatically add the following URL parameters to your ad traffic:</p>
                            <ul>
                                <li>Campaign source = Facebook or Instagram</li>
                                <li>Campaign medium = paid</li>
                                <li>Ad ID</li>
                                <li>Campaign ID</li>
                                <li>Ad set ID</li>
                                <li>Campaign tracking group ID</li>
                            </ul>
                            <p class="text-sm text-gray-600 dark:text-gray-300 mt-3 mb-2"><strong>If you are a Shopify merchant</strong>, you may have the below URL parameters automatically added to your ad traffic:</p>
                            <ul>
                                <li>Campaign source = Facebook</li>
                                <li>Campaign medium = paid</li>
                                <li>Ad ID</li>
                                <li>Campaign ID</li>
                            </ul>
                             <p class="text-xs text-gray-500 dark:text-gray-400 mt-3">Parameters you define in the "URL parameters" field in Ads Manager (which this tool helps build) will typically override any duplicate automatic parameters if they share the same key.</p>
                        </article>
                    </div>
                </div>
                <div class="meta-info-section param-group">
                     <div id="meta-dynamicPlaceholdersAccordionHeader" class="accordion-header">
                        <h4 class="text-md font-medium text-gray-700 dark:text-gray-300">Available Dynamic Placeholders</h4>
                        <span class="accordion-arrow"><i data-lucide="chevron-right"></i></span>
                    </div>
                    <div id="meta-dynamicPlaceholdersAccordionContent" class="accordion-content">
                        <article>
                            <p class="text-sm text-gray-600 dark:text-gray-300 mb-2">You can use dynamic URL parameters to automatically populate values based on your ad setup and delivery. For example, to track campaign name and ad name in Google Analytics, you might use: <code>utm_campaign={{campaign.name}}&amp;utm_content={{ad.name}}</code>.</p>
                            <p class="text-sm text-gray-600 dark:text-gray-300 mb-2">Available dynamic parameters include:</p>
                            <ul>
                                <li><code>ad_id={{ad.id}}</code></li>
                                <li><code>adset_id={{adset.id}}</code></li>
                                <li><code>campaign_id={{campaign.id}}</code></li>
                                <li><code>ad_name={{ad.name}}</code></li>
                                <li><code>adset_name={{adset.name}}</code></li>
                                <li><code>campaign_name={{campaign.name}}</code></li>
                                <li><code>placement={{placement}}</code></li>
                                <li><code>site_source_name={{site_source_name}}</code></li>
                            </ul>
                            <h5 class="mt-3">Name-based parameters:</h5>
                            <p class="text-sm text-gray-600 dark:text-gray-300">Name-based parameters (like <code>{{ad.name}}</code>, <code>{{campaign.name}}</code>) will be set to the name used when the ad, ad set, or campaign was first published. Changing these names later in Ads Manager will not change the value populated by the dynamic parameter for already published ads. If you want to change the parameter value, you'd have to create and publish a new campaign, ad set, or ad.</p>
                            <p class="text-xs text-gray-500 dark:text-gray-400 mt-2">Changing URL parameters after you publish the campaign may cause your ad set to re-enter the learning phase.</p>
                        </article>
                    </div>
                </div>
                 <div class="meta-info-section param-group">
                     <div id="meta-siteSourceAccordionHeader" class="accordion-header">
                        <h4 class="text-md font-medium text-gray-700 dark:text-gray-300">Supported <code>{{site_source_name}}</code></h4>
                        <span class="accordion-arrow"><i data-lucide="chevron-right"></i></span>
                    </div>
                    <div id="meta-siteSourceAccordionContent" class="accordion-content">
                        <article>
                            <ul>
                                <li><code>fb</code> (Facebook)</li>
                                <li><code>ig</code> (Instagram)</li>
                                <li><code>msg</code> (Messenger)</li>
                                <li><code>an</code> (Audience Network)</li>
                            </ul>
                        </article>
                    </div>
                </div>
                <div class="meta-info-section param-group">
                     <div id="meta-placementAccordionHeader" class="accordion-header">
                        <h4 class="text-md font-medium text-gray-700 dark:text-gray-300">Supported <code>{{placement}}</code> Examples</h4>
                        <span class="accordion-arrow"><i data-lucide="chevron-right"></i></span>
                    </div>
                    <div id="meta-placementAccordionContent" class="accordion-content">
                        <article>
                            <p class="text-sm text-gray-600 dark:text-gray-300 mb-1">How tags may appear in reporting:</p>
                             <ul>
                                <li><code>instagram_feed</code> (IG Feed)</li>
                                <li><code>instagram_stories</code> (IG Stories)</li>
                                <li><code>messenger_inbox</code> (Messenger Inbox)</li>
                                <li><code>messenger_sponsored_messages</code></li>
                                <li><code>facebook_right_column</code></li>
                                <li><code>facebook_mobile_feed</code></li>
                                <li><code>facebook_desktop_feed</code></li>
                                <li><code>facebook_instant_article</code></li>
                                <li><code>facebook_instream_video</code></li>
                                <li><code>audience_network</code></li>
                                <li><code>facebook_marketplace</code></li>
                            </ul>
                        </article>
                    </div>
                </div>
                <div class="meta-info-section param-group">
                     <div id="meta-notesAccordionHeader" class="accordion-header">
                        <h4 class="text-md font-medium text-gray-700 dark:text-gray-300">Important Notes</h4>
                        <span class="accordion-arrow"><i data-lucide="chevron-right"></i></span>
                    </div>
                    <div id="meta-notesAccordionContent" class="accordion-content">
                        <article>
                            <ul>
                                <li>Dynamic parameters are not supported for all objectives/formats (e.g., Collection ad format on Instagram, App Promotion objective).</li>
                                <li>Changing URL parameters after publishing may cause your ad set to re-enter the learning phase.</li>
                                <li>Ensure no parameter keys are empty (e.g., <code>...&background=&...</code>). Always provide a value or remove the parameter.</li>
                                <li>Parameters are only applicable to the first product page click from the ad.</li>
                            </ul>
                        </article>
                    </div>
                </div>
                </section>
        </main>

        <footer class="mt-12 pt-6 border-t border-gray-300 dark:border-gray-700 text-center text-sm text-gray-500 dark:text-gray-400">
            <p>This tool helps build campaign URLs and tracking templates. Always test your setup.</p>
            <p>Current Date: <span id="currentDate"></span></p>
            <p>&copy; <span id="currentYear"></span> Unified Marketing Builder. For demonstration purposes.</p>
        </footer>
    </div>

    <script src="UTM Parameter Builder - JS - V2.js"></script>
</body>
</html>
